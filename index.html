<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Connect AI Portal</title>
  <link rel="icon" type="image/png" href="./connect-logo.png"/>
  <link rel="preconnect" href="https://api.fontshare.com">
  <link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,700,900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --brand:#E8553A;--brand-dim:#E8553A15;--brand-h:#D14A32;--brand-t:#C4412B;
      --cyan:#2EC4B6;--cyan-dim:#2EC4B615;
      --bg:#fafaf9;--s1:#fff;--s2:#f5f4f2;--s3:#eae9e6;
      --line:#e4e3e0;--line2:#d4d3d0;
      --ink:#171614;--ink2:#5c5b57;--ink3:#8d8c88;--ink4:#b5b4b0;
      --sans:'Satoshi',-apple-system,BlinkMacSystemFont,sans-serif;
      --mono:'IBM Plex Mono','SF Mono',monospace;
      --r:8px;--r2:10px;--r3:14px;
      --side-w:220px;
      --shadow-c:0 1px 3px rgba(0,0,0,.04),0 0 0 1px rgba(0,0,0,.03);
      --shadow-h:0 4px 16px rgba(0,0,0,.07),0 0 0 1px rgba(0,0,0,.04);
      --shadow-d:0 8px 30px rgba(0,0,0,.12);
    }
    [data-t="dark"]{
      --bg:#171614;--s1:#1e1d1b;--s2:#252422;--s3:#2e2d2a;
      --line:#2e2d2a;--line2:#3d3c39;
      --ink:#f5f4f2;--ink2:#a8a7a3;--ink3:#7a7975;--ink4:#555451;
      --brand-dim:#E8553A22;--cyan-dim:#2EC4B622;
      --shadow-c:0 1px 3px rgba(0,0,0,.3),0 0 0 1px rgba(255,255,255,.04);
      --shadow-h:0 4px 16px rgba(0,0,0,.4),0 0 0 1px rgba(255,255,255,.06);
      --shadow-d:0 8px 30px rgba(0,0,0,.5);
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{font-size:15px;scroll-behavior:smooth}
    body{font-family:var(--sans);background:var(--bg);color:var(--ink);line-height:1.55;min-height:100vh;-webkit-font-smoothing:antialiased;transition:background .2s,color .2s}
    button{cursor:pointer;font-family:inherit}input,select,textarea{font-family:inherit}
    :focus-visible{outline:2px solid var(--brand);outline-offset:2px}
    ::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--line);border-radius:3px}

    /* ‚îÄ‚îÄ TOPBAR ‚îÄ‚îÄ */
    .top{position:fixed;top:0;left:0;right:0;z-index:100;height:48px;background:var(--s1);border-bottom:1px solid var(--line);display:flex;align-items:center;padding:0 1.25rem;gap:.75rem}
    .top__brand{display:flex;align-items:center;gap:.5rem;text-decoration:none;min-width:var(--side-w);flex-shrink:0}
    .top__logo{height:20px;width:auto}
    [data-t="dark"] .top__logo{filter:brightness(0) invert(1)}
    .top__sep{width:1px;height:16px;background:var(--line2)}
    .top__name{font-size:.8rem;font-weight:700;color:var(--ink);letter-spacing:.01em}
    .top__name em{font-style:normal;color:var(--brand)}
    .top__mid{flex:1;display:flex;justify-content:center}
    .top__search{width:100%;max-width:420px;position:relative}
    .top__q{width:100%;padding:.4rem .75rem .4rem 2rem;background:var(--s2);border:1px solid var(--line);border-radius:100px;font-size:.8rem;color:var(--ink);outline:none;transition:border .15s}
    .top__q::placeholder{color:var(--ink4)}
    .top__q:focus{border-color:var(--brand)}
    .top__q-ico{position:absolute;left:.7rem;top:50%;transform:translateY(-50%);width:14px;height:14px;color:var(--ink4);pointer-events:none}
    .top__right{display:flex;align-items:center;gap:.375rem}
    .top-btn{display:inline-flex;align-items:center;gap:.25rem;padding:.3rem .55rem;background:transparent;border:1px solid transparent;border-radius:var(--r);font-size:.75rem;font-weight:500;color:var(--ink3);transition:all .12s;white-space:nowrap}
    .top-btn:hover{color:var(--ink);background:var(--s2)}
    .top-btn.on{color:var(--brand-t);background:var(--brand-dim)}
    .top-btn svg{width:14px;height:14px;stroke:currentColor;fill:none;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round}
    .lpill{display:inline-flex;background:var(--s2);border-radius:100px;padding:2px}
    .lpill__b{padding:.15rem .5rem;border:none;background:transparent;border-radius:100px;font-size:.65rem;font-weight:700;color:var(--ink4);letter-spacing:.04em;transition:all .12s}
    .lpill__b.on{background:var(--s1);color:var(--ink);box-shadow:var(--shadow-c)}
    @media(max-width:768px){.top__mid{display:none}.top__brand{min-width:auto}.hide-m{display:none!important}}

    /* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
    .side{position:fixed;top:48px;left:0;bottom:0;width:var(--side-w);background:var(--s1);border-right:1px solid var(--line);overflow-y:auto;padding:.75rem 0;z-index:90;transition:transform .2s}
    .side__grp{padding:0 .625rem;margin-bottom:.125rem}
    .side__label{font-size:.6rem;text-transform:uppercase;letter-spacing:.08em;font-weight:700;color:var(--ink4);padding:.5rem .625rem .25rem}
    .nav-item{display:flex;align-items:center;gap:.5rem;padding:.4375rem .625rem;border-radius:var(--r);font-size:.8rem;font-weight:500;color:var(--ink3);text-decoration:none;cursor:pointer;transition:all .1s;border:none;background:none;width:100%;text-align:left}
    .nav-item:hover{color:var(--ink);background:var(--s2)}
    .nav-item.on{color:var(--ink);background:var(--s2);font-weight:700}
    .nav-item.on::before{content:'';width:3px;height:16px;background:var(--brand);border-radius:2px;margin-left:-2px;margin-right:calc(.5rem - 3px)}
    .nav-item svg{width:16px;height:16px;stroke:currentColor;fill:none;stroke-width:1.7;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0}
    .side__div{height:1px;background:var(--line);margin:.5rem .625rem}
    @media(max-width:768px){.side{transform:translateX(-100%)}.side.open{transform:translateX(0)}}

    /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
    .shell{margin-left:var(--side-w);padding-top:48px;min-height:100vh;transition:margin .2s}
    @media(max-width:768px){.shell{margin-left:0}}
    .view{display:none;animation:fadeIn .2s ease}.view.on{display:block}
    @keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}

    /* ‚îÄ‚îÄ HERO BANNER ‚îÄ‚îÄ */
    .hero-banner{padding:2rem 2.5rem;border-radius:var(--r3);margin:1.5rem 2rem 0;background:linear-gradient(135deg,#E8553A 0%,#F0845C 40%,var(--cyan) 100%);color:#fff;position:relative;overflow:hidden}
    .hero-banner::after{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.7' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.08'/%3E%3C/svg%3E");pointer-events:none}
    .hero-banner__sub{font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:.08em;opacity:.8;margin-bottom:.5rem}
    .hero-banner__h{font-size:2rem;font-weight:900;letter-spacing:-.02em;line-height:1.15;margin-bottom:.75rem}
    .hero-banner__p{font-size:.875rem;line-height:1.6;max-width:640px;opacity:.9}

    /* ‚îÄ‚îÄ SECTIONS ‚îÄ‚îÄ */
    .sec{padding:2rem 2rem 3rem}
    .sec__h{font-size:1.25rem;font-weight:900;letter-spacing:-.02em;color:var(--ink);margin-bottom:1rem}
    .content-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:.75rem}
    .cc{background:var(--s1);border:1px solid var(--line);border-radius:var(--r2);padding:1.25rem;transition:all .15s;cursor:pointer;display:flex;flex-direction:column;gap:.5rem}
    .cc:hover{box-shadow:var(--shadow-h);border-color:var(--line2);transform:translateY(-1px)}
    .cc__ico{width:36px;height:36px;border-radius:var(--r);display:flex;align-items:center;justify-content:center;font-size:1.1rem}
    .cc__ico--brand{background:var(--brand-dim);color:var(--brand)}
    .cc__ico--cyan{background:var(--cyan-dim);color:var(--cyan)}
    .cc__h{font-size:.9rem;font-weight:700;color:var(--ink)}
    .cc__p{font-size:.775rem;color:var(--ink3);line-height:1.5}
    .cc__tag{font-size:.6rem;text-transform:uppercase;letter-spacing:.06em;font-weight:700;color:var(--ink4);margin-top:auto;padding-top:.25rem}
    .placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;color:var(--ink4);text-align:center;gap:.75rem}
    .placeholder__ico{font-size:2.5rem;opacity:.4}
    .placeholder__h{font-size:1.1rem;font-weight:700;color:var(--ink3)}
    .placeholder__p{font-size:.8rem;max-width:360px}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       PROMPT LIBRARY
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .pl{padding:1.5rem 2rem 3rem}
    .pl__head{text-align:center;margin-bottom:1.75rem}
    .pl__h{font-size:1.6rem;font-weight:900;letter-spacing:-.03em;color:var(--ink);margin-bottom:.375rem}
    .pl__sub{font-size:.85rem;color:var(--ink3)}
    .pl__toolbar{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem;flex-wrap:wrap}
    .pl__search{flex:1;min-width:200px;position:relative}
    .pl__q{width:100%;padding:.55rem .75rem .55rem 2.25rem;background:var(--s2);border:1px solid var(--line);border-radius:var(--r);font-size:.825rem;color:var(--ink);outline:none;transition:border .15s}
    .pl__q::placeholder{color:var(--ink4)}.pl__q:focus{border-color:var(--brand)}
    .pl__q-ico{position:absolute;left:.7rem;top:50%;transform:translateY(-50%);width:14px;height:14px;color:var(--ink4)}
    .pl__sel{padding:.55rem .75rem;background:var(--s2);border:1px solid var(--line);border-radius:var(--r);font-size:.8rem;color:var(--ink3);cursor:pointer;outline:none}
    .pl__count{font-size:.75rem;color:var(--ink4);margin-left:auto}

    .pg{display:grid;grid-template-columns:repeat(3,1fr);gap:.625rem}
    @media(max-width:1100px){.pg{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:700px){.pg{grid-template-columns:1fr}}
    .pc{background:var(--s2);border:1px solid var(--line);border-radius:var(--r2);padding:1.125rem 1.25rem;cursor:pointer;transition:all .15s;display:flex;flex-direction:column;gap:.375rem;position:relative}
    .pc:hover{border-color:var(--line2);box-shadow:var(--shadow-h);transform:translateY(-1px)}
    .pc__cat{font-size:.6rem;text-transform:uppercase;letter-spacing:.07em;font-weight:700;color:var(--brand-t)}
    .pc__h{font-size:.9rem;font-weight:700;color:var(--ink);line-height:1.3}
    .pc__desc{font-size:.75rem;color:var(--ink3);line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .pc__foot{display:flex;align-items:center;justify-content:space-between;margin-top:auto;padding-top:.25rem}
    .pc__tags{display:flex;gap:.2rem;flex-wrap:wrap}
    .pc__tag{font-size:.575rem;padding:.075rem .375rem;background:var(--s3);border-radius:100px;color:var(--ink4);font-weight:500}
    .pc__id{font-family:var(--mono);font-size:.575rem;color:var(--ink4)}
    .pc__star{position:absolute;top:.6rem;right:.6rem;background:none;border:none;font-size:.8rem;opacity:0;transition:opacity .1s;z-index:2}
    .pc:hover .pc__star{opacity:.4}.pc__star:hover{opacity:1!important}.pc__star.on{opacity:1}
    .pc{animation:rise .2s ease both}
    @keyframes rise{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}
    mark{background:var(--brand-dim);color:var(--brand-t);border-radius:2px;padding:0 1px}
    .empty{text-align:center;padding:3rem 1rem;color:var(--ink4);grid-column:1/-1}
    .empty__h{font-size:.95rem;font-weight:700;color:var(--ink3);margin-bottom:.25rem}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       MODAL ‚Äî NEW UX
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .mbg{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:200;display:none;align-items:center;justify-content:center;padding:1.5rem}
    .mbg.on{display:flex}
    .mdl{background:var(--s1);border:1px solid var(--line);border-radius:var(--r3);width:100%;max-width:720px;max-height:90vh;overflow-y:auto;box-shadow:var(--shadow-d);animation:mIn .2s ease}
    @keyframes mIn{from{opacity:0;transform:scale(.97)}to{opacity:1;transform:scale(1)}}

    .mdl__top{display:flex;align-items:center;justify-content:space-between;padding:.875rem 1.5rem;border-bottom:1px solid var(--line);position:sticky;top:0;background:var(--s1);z-index:1;border-radius:var(--r3) var(--r3) 0 0}
    .mdl__top-l{display:flex;flex-direction:column;gap:.15rem}
    .mdl__cat{font-size:.6rem;text-transform:uppercase;letter-spacing:.07em;font-weight:700;color:var(--brand-t)}
    .mdl__title{font-size:1.05rem;font-weight:900;color:var(--ink);letter-spacing:-.01em}
    .mdl__x{background:var(--s2);border:none;width:28px;height:28px;border-radius:100px;display:flex;align-items:center;justify-content:center;color:var(--ink3);font-size:.85rem;transition:all .1s;flex-shrink:0}
    .mdl__x:hover{background:var(--s3);color:var(--ink)}

    .mdl__body{padding:1.25rem 1.5rem;display:flex;flex-direction:column;gap:1.125rem}

    /* What box */
    .wb{background:linear-gradient(135deg,var(--brand-dim),var(--cyan-dim));border:1px solid var(--line);border-radius:var(--r2);padding:.875rem 1.125rem}
    .wb__k{font-size:.6rem;text-transform:uppercase;letter-spacing:.08em;font-weight:700;color:var(--brand-t);margin-bottom:.2rem}
    .wb__v{font-size:.875rem;color:var(--ink);line-height:1.55;font-weight:500}

    /* Var fields */
    .vf-h{font-size:.85rem;font-weight:700;color:var(--ink);display:flex;align-items:center;gap:.375rem;margin-bottom:.5rem}
    .vf-h .step{width:22px;height:22px;border-radius:50%;background:var(--brand);color:#fff;font-size:.65rem;font-weight:900;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0}
    .vf{margin-bottom:.5rem}
    .vf__label{font-size:.7rem;font-weight:700;color:var(--ink3);margin-bottom:.2rem;display:flex;align-items:center;gap:.25rem}
    .vf__label code{font-family:var(--mono);color:var(--brand-t);background:var(--brand-dim);padding:.05rem .3rem;border-radius:4px;font-size:.625rem}
    .vf__ta{width:100%;padding:.55rem .75rem;background:var(--s2);border:1.5px solid var(--line);border-radius:var(--r);font-size:.825rem;color:var(--ink);outline:none;transition:border .15s;resize:vertical;min-height:72px;font-family:var(--sans);line-height:1.5}
    .vf__ta::placeholder{color:var(--ink4)}.vf__ta:focus{border-color:var(--brand)}
    .vf__hint{font-size:.65rem;color:var(--ink4);margin-top:.15rem}

    /* Preview */
    .pv-h{font-size:.85rem;font-weight:700;color:var(--ink);display:flex;align-items:center;gap:.375rem;margin-bottom:.375rem}
    .pv-h .step{width:22px;height:22px;border-radius:50%;background:var(--ink3);color:#fff;font-size:.65rem;font-weight:900;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0}
    .pv-tog{display:flex;background:var(--s2);border-radius:100px;padding:2px;width:fit-content;margin-bottom:.5rem}
    .pv-tog__b{padding:.2rem .65rem;border:none;background:transparent;border-radius:100px;font-size:.675rem;font-weight:600;color:var(--ink4);cursor:pointer;transition:all .12s}
    .pv-tog__b.on{background:var(--s1);color:var(--ink);box-shadow:0 1px 3px rgba(0,0,0,.06)}
    .pv-box{background:var(--s2);border:1.5px solid var(--line);border-radius:var(--r2);padding:.875rem 1rem;font-size:.775rem;line-height:1.7;color:var(--ink2);max-height:220px;overflow-y:auto}
    .pv-box b{color:var(--brand-t);font-weight:700}
    .pv-box .hl{background:#2EC4B618;border-radius:3px;padding:0 3px;color:var(--cyan);font-weight:600}
    .pv-raw{font-family:var(--mono);font-size:.725rem;white-space:pre-wrap;color:var(--ink3)}

    /* Actions */
    .acts{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:.35rem;padding:.575rem 1.125rem;border-radius:var(--r);font-size:.825rem;font-weight:700;border:none;cursor:pointer;transition:all .15s}
    .btn--gem{background:var(--ink);color:#fff;position:relative;overflow:hidden}
    .btn--gem::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,#4285F4,#34A853,#FBBC04,#EA4335);opacity:0;transition:opacity .2s}
    .btn--gem:hover::before{opacity:1}
    .btn--gem span{position:relative;z-index:1;display:flex;align-items:center;gap:.35rem}
    .btn--copy{background:var(--brand);color:#fff}.btn--copy:hover{background:var(--brand-h)}
    .btn--ghost{background:transparent;color:var(--ink3);border:1px solid var(--line);padding:.5rem .875rem}.btn--ghost:hover{border-color:var(--line2);color:var(--ink2)}
    .or-d{font-size:.675rem;color:var(--ink4);font-weight:600}

    /* Info strip */
    .istrip{display:flex;gap:1.25rem;padding:.75rem 1rem;background:var(--s2);border-radius:var(--r2);flex-wrap:wrap}
    .istrip__i{display:flex;flex-direction:column;gap:.1rem}
    .istrip__k{font-size:.55rem;text-transform:uppercase;letter-spacing:.08em;font-weight:700;color:var(--ink4)}
    .istrip__v{font-size:.75rem;color:var(--ink2);font-weight:500}
    .istrip__v code{font-family:var(--mono);font-size:.675rem}
    .cx-badge{display:inline-flex;align-items:center;gap:.2rem;font-size:.65rem;font-weight:700}
    .cx-badge::before{content:'';width:5px;height:5px;border-radius:50%}
    .cx--1::before{background:#1A8754}.cx--1{color:#1A8754}
    .cx--2::before{background:#2563EB}.cx--2{color:#2563EB}
    .cx--3::before{background:#D97706}.cx--3{color:#D97706}
    .cx--4::before{background:#DC2626}.cx--4{color:#DC2626}

    /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
    .toast{position:fixed;bottom:1.5rem;left:50%;transform:translateX(-50%) translateY(120%);background:var(--ink);color:var(--bg);padding:.55rem 1.15rem;border-radius:var(--r2);font-size:.8rem;font-weight:600;box-shadow:0 12px 40px rgba(0,0,0,.2);z-index:300;opacity:0;transition:all .25s cubic-bezier(.34,1.56,.64,1);pointer-events:none}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

    /* ‚îÄ‚îÄ KAI ‚îÄ‚îÄ */
    .kai-modes{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}
    @media(max-width:800px){.kai-modes{grid-template-columns:1fr}}
    .kai-card{background:var(--s1);border:1px solid var(--line);border-radius:var(--r3);overflow:hidden;display:flex;flex-direction:column;position:relative;transition:box-shadow .15s}
    .kai-card:hover{box-shadow:var(--shadow-h)}
    .kai-card__badge{position:absolute;top:.875rem;right:.875rem;font-size:.575rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;padding:.15rem .5rem;border-radius:100px;z-index:2}
    .kai-card__badge--chat{background:#4285F415;color:#4285F4}
    .kai-card__badge--voice{background:#1A875415;color:#1A8754}
    .kai-card__visual{display:flex;align-items:center;justify-content:center;padding:2rem 1.5rem 1.25rem;background:var(--s2)}
    .kai-card__body{padding:1.25rem 1.5rem;display:flex;flex-direction:column;gap:.5rem}
    .kai-card__h{font-size:1rem;font-weight:900;color:var(--ink);letter-spacing:-.01em}
    .kai-card__p{font-size:.8rem;color:var(--ink3);line-height:1.55}

    .kai-ava{display:flex;flex-direction:column;align-items:center;gap:.375rem}
    .kai-ava__ring{width:72px;height:72px;border-radius:18px;overflow:hidden;box-shadow:0 4px 16px rgba(232,85,58,.2)}
    .kai-ava__logo{width:100%;height:100%}
    .kai-ava__name{font-size:1.1rem;font-weight:900;color:var(--ink);letter-spacing:.02em}
    .kai-ava__sub{font-size:.7rem;color:var(--ink4);font-weight:500}

    .kai-voice{display:flex;flex-direction:column;align-items:center;gap:.375rem}
    .kai-voice__knob{width:72px;height:72px;border-radius:50%;background:linear-gradient(145deg,#e0e0e0,#a0a0a0);display:flex;align-items:center;justify-content:center;position:relative;box-shadow:0 4px 16px rgba(0,0,0,.15)}
    [data-t="dark"] .kai-voice__knob{background:linear-gradient(145deg,#555,#333)}
    .kai-voice__ring--outer{position:absolute;inset:-6px;border:2px solid var(--line);border-radius:50%}
    .kai-voice__ring--inner{position:absolute;inset:4px;border:1.5px solid rgba(255,255,255,.25);border-radius:50%}
    .kai-voice__letter{font-size:1.5rem;font-weight:900;color:#fff;position:relative;z-index:1;text-shadow:0 1px 3px rgba(0,0,0,.3)}
    .kai-voice__mic,.kai-voice__speaker{width:36px;height:36px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:.95rem}
    .kai-voice__mic{background:#1A8754;color:#fff}
    .kai-voice__speaker{background:var(--s3);color:var(--ink3)}

    .kai-steps{display:flex;flex-direction:column;gap:.375rem;margin-top:.25rem}
    .kai-step{display:flex;align-items:center;gap:.5rem;font-size:.775rem;color:var(--ink2)}
    .kai-step__n{width:20px;height:20px;border-radius:50%;background:var(--brand-dim);color:var(--brand-t);font-size:.6rem;font-weight:900;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0}

    .burger{display:none;background:none;border:none;padding:.3rem;color:var(--ink3)}
    .burger svg{width:20px;height:20px;stroke:currentColor;fill:none;stroke-width:1.8;stroke-linecap:round}
    @media(max-width:768px){.burger{display:flex}}

    /* ‚îÄ‚îÄ INTERNAL TABS ‚îÄ‚îÄ */
    .tabs{display:flex;gap:0;border-bottom:1px solid var(--line);margin-bottom:1.5rem;padding:0 2rem}
    .tab{padding:.625rem 1.25rem;background:none;border:none;border-bottom:2px solid transparent;font-size:.85rem;font-weight:600;color:var(--ink3);cursor:pointer;transition:all .12s;white-space:nowrap}
    .tab:hover{color:var(--ink)}
    .tab.on{color:var(--brand);border-bottom-color:var(--brand)}
    .tab-panel{display:none;animation:fadeIn .2s ease}.tab-panel.on{display:block}

    /* ‚îÄ‚îÄ TOOL CARDS ‚îÄ‚îÄ */
    .tool-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:.75rem}
    .tool{background:var(--s1);border:1px solid var(--line);border-radius:var(--r2);padding:1.25rem;transition:all .15s;display:flex;gap:1rem;align-items:flex-start}
    .tool:hover{box-shadow:var(--shadow-h);border-color:var(--line2);transform:translateY(-1px)}
    .tool__ico{width:42px;height:42px;border-radius:var(--r);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:1.2rem}
    .tool__ico--red{background:#DC262610;color:#DC2626}
    .tool__ico--blue{background:#2563EB10;color:#2563EB}
    .tool__ico--green{background:#1A875410;color:#1A8754}
    .tool__ico--amber{background:#D9770610;color:#D97706}
    .tool__ico--purple{background:#7C3AED10;color:#7C3AED}
    .tool__ico--cyan{background:var(--cyan-dim);color:var(--cyan)}
    .tool__body{flex:1;min-width:0}
    .tool__h{font-size:.9rem;font-weight:700;color:var(--ink);margin-bottom:.2rem}
    .tool__p{font-size:.75rem;color:var(--ink3);line-height:1.5}
    .tool__link{display:inline-flex;align-items:center;gap:.2rem;font-size:.7rem;font-weight:700;color:var(--brand);text-decoration:none;margin-top:.375rem;transition:gap .12s}
    .tool__link:hover{gap:.4rem}

    /* ‚îÄ‚îÄ BEST PRACTICES ‚îÄ‚îÄ */
    .bp-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:.75rem}
    .bp{background:var(--s1);border:1px solid var(--line);border-radius:var(--r2);padding:1.25rem;display:flex;flex-direction:column;gap:.5rem}
    .bp__num{width:28px;height:28px;border-radius:50%;background:var(--brand);color:#fff;font-size:.7rem;font-weight:900;display:flex;align-items:center;justify-content:center;flex-shrink:0}
    .bp__h{font-size:.9rem;font-weight:700;color:var(--ink);display:flex;align-items:center;gap:.5rem}
    .bp__p{font-size:.775rem;color:var(--ink3);line-height:1.6}
    .bp__tag{display:inline-flex;padding:.15rem .5rem;background:var(--s2);border-radius:100px;font-size:.6rem;font-weight:700;color:var(--ink4);text-transform:uppercase;letter-spacing:.04em;width:fit-content}
    .bp__do{font-size:.75rem;color:#1A8754;font-weight:600;padding-left:.75rem;position:relative;margin-top:.125rem}
    .bp__do::before{content:'‚úì';position:absolute;left:0;font-size:.65rem}
    .bp__dont{font-size:.75rem;color:#DC2626;font-weight:600;padding-left:.75rem;position:relative;margin-top:.125rem}
    .bp__dont::before{content:'‚úï';position:absolute;left:0;font-size:.65rem}
  </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê TOPBAR ‚ïê‚ïê‚ïê -->
<header class="top">
  <a class="top__brand" href="./">
    <button class="burger" id="burger" type="button"><svg viewBox="0 0 24 24"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
    <img class="top__logo" src="./connect-logo.png" alt="Connect"/>
    <span class="top__sep"></span>
    <span class="top__name"><em>AI</em> Portal</span>
  </a>
  <div class="top__mid">
    <div class="top__search">
      <svg class="top__q-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <input class="top__q" id="globalQ" type="search" placeholder="Search‚Ä¶" autocomplete="off"/>
    </div>
  </div>
  <div class="top__right">
    <div class="lpill">
      <button class="lpill__b on" data-lang="es">ES</button>
      <button class="lpill__b" data-lang="en">EN</button>
    </div>
    <button class="top-btn" id="btnTheme" type="button">
      <svg viewBox="0 0 24 24" id="tIco"><path d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z"/></svg>
      <span class="hide-m" id="tLbl">Dark</span>
    </button>
  </div>
</header>

<!-- ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê -->
<nav class="side" id="side">
  <div class="side__grp">
    <button class="nav-item on" data-v="home"><svg viewBox="0 0 24 24"><path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-4 0h4"/></svg>Home</button>
    <button class="nav-item" data-v="kai"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><circle cx="12" cy="12" r="8" fill="none"/><path d="M12 2a10 10 0 0110 10"/><path d="M12 2a10 10 0 00-10 10"/></svg>KAI</button>
    <button class="nav-item" data-v="prompts"><svg viewBox="0 0 24 24"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>Prompt Library</button>
    <button class="nav-item" data-v="whats-new"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>What's New</button>
  </div>
  <div class="side__div"></div>
  <div class="side__grp">
    <div class="side__label">Comunidad</div>
    <button class="nav-item" data-v="stories"><svg viewBox="0 0 24 24"><path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/><path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/></svg>Stories</button>
    <button class="nav-item" data-v="use-cases"><svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>Use Cases</button>
    <button class="nav-item" data-v="champions"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>Champions</button>
  </div>
  <div class="side__div"></div>
  <div class="side__grp">
    <div class="side__label">Recursos</div>
    <button class="nav-item" data-v="cybersec"><svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>Ciberseguridad</button>
    <button class="nav-item" data-v="education"><svg viewBox="0 0 24 24"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c0 1.66 2.69 3 6 3s6-1.34 6-3v-5"/></svg>Education</button>
    <button class="nav-item" data-v="help"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>Help</button>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê CONTENT ‚ïê‚ïê‚ïê -->
<div class="shell" id="shell">

  <!-- HOME -->
  <div class="view on" id="v-home">
    <div class="hero-banner">
      <div class="hero-banner__sub">Connect AI Portal</div>
      <div class="hero-banner__h">Potencia tu trabajo con<br/>inteligencia artificial</div>
      <div class="hero-banner__p">Accede a prompts, casos de uso, recursos educativos y una comunidad interna para aprovechar la IA en cada √°rea de Connect Assistance.</div>
    </div>
    <section class="sec">
      <div class="sec__h">Acceso r√°pido</div>
      <div class="content-grid">
        <div class="cc" onclick="nav('prompts')"><div class="cc__ico cc__ico--brand">‚åò</div><div class="cc__h">Prompt Library</div><div class="cc__p">150 prompts listos para usar, organizados por √°rea. Completa los datos y ejecuta en Gemini.</div><div class="cc__tag">150 prompts</div></div>
        <div class="cc" onclick="nav('use-cases')"><div class="cc__ico cc__ico--cyan">‚óÜ</div><div class="cc__h">Casos de uso</div><div class="cc__p">Ejemplos reales de c√≥mo cada departamento usa IA en su trabajo diario.</div><div class="cc__tag">Por departamento</div></div>
        <div class="cc" onclick="nav('education')"><div class="cc__ico cc__ico--brand">‚ñ≤</div><div class="cc__h">Education</div><div class="cc__p">Gu√≠as, tutoriales y mejores pr√°cticas para sacarle provecho a la IA.</div><div class="cc__tag">Aprendizaje</div></div>
        <div class="cc" onclick="nav('champions')"><div class="cc__ico cc__ico--cyan">‚òÖ</div><div class="cc__h">Champions</div><div class="cc__p">√önete al programa de campeones de IA y lidera la adopci√≥n en tu equipo.</div><div class="cc__tag">Comunidad</div></div>
      </div>
    </section>
    <section class="sec">
      <div class="sec__h">Novedades recientes</div>
      <div class="content-grid">
        <div class="cc"><div class="cc__h">Portal AI v2.0 lanzado</div><div class="cc__p">Nueva interfaz con navegaci√≥n lateral, dark mode y soporte biling√ºe ES/EN.</div><div class="cc__tag">Feb 2026</div></div>
        <div class="cc"><div class="cc__h">150 prompts disponibles</div><div class="cc__p">Librer√≠a completa con 15 categor√≠as cubriendo todas las √°reas de Connect.</div><div class="cc__tag">Feb 2026</div></div>
        <div class="cc"><div class="cc__h">Programa Champions abierto</div><div class="cc__p">Nomina a los l√≠deres de IA en tu departamento para impulsar la adopci√≥n.</div><div class="cc__tag">Pr√≥ximamente</div></div>
      </div>
    </section>
  </div>

  <!-- PROMPT LIBRARY -->
  <div class="view" id="v-prompts">
    <div class="pl">
      <div class="pl__head">
        <div class="pl__h">Prompt Library</div>
        <div class="pl__sub" id="plSub">Explora prompts optimizados para las tareas diarias de Connect.</div>
      </div>
      <div class="pl__toolbar">
        <div class="pl__search">
          <svg class="pl__q-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input class="pl__q" id="plQ" type="search" placeholder="Search‚Ä¶" autocomplete="off"/>
        </div>
        <select class="pl__sel" id="plCat"><option value="">All categories</option></select>
        <select class="pl__sel" id="plSort"><option value="rel">Relevance</option><option value="az">A ‚Üí Z</option><option value="za">Z ‚Üí A</option><option value="id">ID</option></select>
        <div class="pl__count" id="plCount">‚Äî</div>
      </div>
      <div class="pg" id="plGrid"></div>
    </div>
  </div>

  <!-- OTHER VIEWS -->
  <!-- KAI -->
  <div class="view" id="v-kai">
    <div class="hero-banner" style="background:linear-gradient(135deg,#E8553A 0%,#F0845C 35%,#FFB088 100%)">
      <div class="hero-banner__sub">Knowledge Assistant Interface</div>
      <div class="hero-banner__h">KAI</div>
      <div class="hero-banner__p">El asistente de IA interno de Connect. Una app instalada en Google Chat para consultas de texto y disponible en modo Voice para interacci√≥n por voz.</div>
    </div>

    <!-- KAI Modes -->
    <section class="sec">
      <div class="sec__h">C√≥mo usar KAI</div>
      <div class="kai-modes">

        <!-- Chat Mode -->
        <div class="kai-card">
          <div class="kai-card__badge kai-card__badge--chat">Chat</div>
          <div class="kai-card__visual">
            <div class="kai-ava">
              <div class="kai-ava__ring">
                <svg class="kai-ava__logo" viewBox="0 0 80 80" fill="none">
                  <rect width="80" height="80" rx="18" fill="#E8553A"/>
                  <circle cx="40" cy="40" r="20" stroke="#fff" stroke-width="3.5" fill="none"/>
                  <circle cx="40" cy="40" r="8" stroke="#fff" stroke-width="3" fill="none"/>
                  <circle cx="40" cy="48" r="4" fill="#fff"/>
                </svg>
              </div>
              <div class="kai-ava__name">KAI</div>
              <div class="kai-ava__sub">App de Google Chat</div>
            </div>
          </div>
          <div class="kai-card__body">
            <div class="kai-card__h">KAI en Google Chat</div>
            <div class="kai-card__p">KAI es una app interna instalada en Google Chat. Escr√≠bele directamente como a cualquier chat y pregunta sobre procesos, pol√≠ticas, herramientas o cualquier duda operativa de Connect.</div>
            <div class="kai-steps">
              <div class="kai-step"><span class="kai-step__n">1</span><span>Abre Google Chat</span></div>
              <div class="kai-step"><span class="kai-step__n">2</span><span>Busca <strong>KAI</strong> en apps</span></div>
              <div class="kai-step"><span class="kai-step__n">3</span><span>Escribe tu pregunta</span></div>
            </div>
            <a class="btn btn--copy" href="https://chat.google.com" target="_blank" style="text-decoration:none;display:inline-flex;margin-top:.5rem">Abrir Google Chat</a>
          </div>
        </div>

        <!-- Voice Mode -->
        <div class="kai-card">
          <div class="kai-card__badge kai-card__badge--voice">Voice</div>
          <div class="kai-card__visual">
            <div class="kai-voice">
              <div class="kai-voice__knob">
                <div class="kai-voice__ring kai-voice__ring--outer"></div>
                <div class="kai-voice__ring kai-voice__ring--inner"></div>
                <div class="kai-voice__letter">K</div>
              </div>
              <div class="kai-ava__name">KAI</div>
              <div class="kai-ava__sub">Asistente de Connect</div>
            </div>
          </div>
          <div class="kai-card__body">
            <div class="kai-card__h">KAI Voice</div>
            <div class="kai-card__p">Interact√∫a con KAI por voz. Ideal para consultas r√°pidas, onboarding de nuevos empleados y acceso manos libres a la informaci√≥n de Connect.</div>
            <div class="kai-steps">
              <div class="kai-step"><span class="kai-step__n">1</span><span>Accede a la app de KAI Voice</span></div>
              <div class="kai-step"><span class="kai-step__n">2</span><span>Presiona el micr√≥fono</span></div>
              <div class="kai-step"><span class="kai-step__n">3</span><span>Habla tu pregunta</span></div>
            </div>
            <div class="kai-voice__btns" style="display:flex;gap:.375rem;margin-top:.5rem">
              <span class="kai-voice__mic">üé§</span>
              <span class="kai-voice__speaker">üîä</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- What can KAI do -->
    <section class="sec" style="padding-top:0">
      <div class="sec__h">¬øQu√© puede hacer KAI?</div>
      <div class="content-grid">
        <div class="cc"><div class="cc__ico cc__ico--brand">?</div><div class="cc__h">Consultas operativas</div><div class="cc__p">Procesos internos, pol√≠ticas de la empresa, informaci√≥n de productos y servicios de asistencia.</div></div>
        <div class="cc"><div class="cc__ico cc__ico--cyan">üìã</div><div class="cc__h">Onboarding</div><div class="cc__p">Gu√≠a a nuevos empleados paso a paso sobre herramientas, accesos y procedimientos iniciales.</div></div>
        <div class="cc"><div class="cc__ico cc__ico--brand">‚ö°</div><div class="cc__h">Soporte IT r√°pido</div><div class="cc__p">Resuelve dudas t√©cnicas frecuentes: VPN, accesos, configuraci√≥n de herramientas, contrase√±as.</div></div>
        <div class="cc"><div class="cc__ico cc__ico--cyan">üìä</div><div class="cc__h">Datos y reportes</div><div class="cc__p">Consulta m√©tricas, KPIs y datos operativos en lenguaje natural sin necesidad de dashboards.</div></div>
      </div>
    </section>

    <!-- Tips -->
    <section class="sec" style="padding-top:0">
      <div class="sec__h">Tips para mejores respuestas</div>
      <div class="bp-grid">
        <div class="bp">
          <div class="bp__h"><span class="bp__num">1</span> S√© espec√≠fico</div>
          <div class="bp__p">Entre m√°s contexto le des a KAI, mejor ser√° la respuesta. Incluye el √°rea, proceso o situaci√≥n concreta.</div>
          <div class="bp__do">"¬øCu√°l es el proceso de escalamiento para asistencia vial en Costa Rica?"</div>
          <div class="bp__dont">"¬øC√≥mo funciona el proceso?"</div>
        </div>
        <div class="bp">
          <div class="bp__h"><span class="bp__num">2</span> Una pregunta a la vez</div>
          <div class="bp__p">KAI responde mejor cuando cada mensaje tiene un solo tema. Si tienes varias dudas, env√≠alas por separado.</div>
          <div class="bp__do">"¬øQu√© documentos necesito para registrar un proveedor nuevo?"</div>
          <div class="bp__dont">"¬øC√≥mo registro un proveedor y tambi√©n d√≥nde veo las facturas pendientes?"</div>
        </div>
        <div class="bp">
          <div class="bp__h"><span class="bp__num">3</span> No compartas datos sensibles</div>
          <div class="bp__p">Aunque KAI es interno, evita compartir contrase√±as, n√∫meros de tarjeta o datos PII de clientes directamente.</div>
          <div class="bp__do">Pregunta sobre procesos y pol√≠ticas generales</div>
          <div class="bp__dont">No pegues bases de datos o informaci√≥n confidencial de clientes</div>
        </div>
      </div>
    </section>
  </div>
  <div class="view" id="v-whats-new"><div class="sec"><div class="hero-banner"><div class="hero-banner__sub">Actualizaciones</div><div class="hero-banner__h">What's New</div><div class="hero-banner__p">√öltimas novedades del portal y herramientas de IA en Connect.</div></div></div><div class="sec"><div class="placeholder"><div class="placeholder__ico">‚ú¶</div><div class="placeholder__h">Pr√≥ximamente</div><div class="placeholder__p">Las actualizaciones aparecer√°n aqu√≠.</div></div></div></div>
  <div class="view" id="v-stories"><div class="sec"><div class="hero-banner"><div class="hero-banner__sub">Historias internas</div><div class="hero-banner__h">Stories</div><div class="hero-banner__p">C√≥mo los equipos de Connect est√°n transformando su trabajo con IA.</div></div></div><div class="sec"><div class="placeholder"><div class="placeholder__ico">üìñ</div><div class="placeholder__h">Pr√≥ximamente</div><div class="placeholder__p">Las historias de √©xito se publicar√°n aqu√≠.</div></div></div></div>
  <div class="view" id="v-use-cases"><div class="sec"><div class="hero-banner"><div class="hero-banner__sub">Casos reales</div><div class="hero-banner__h">Use Cases</div><div class="hero-banner__p">Casos de uso de IA por departamento en Connect Assistance.</div></div></div><div class="sec"><div class="placeholder"><div class="placeholder__ico">‚óÜ</div><div class="placeholder__h">Pr√≥ximamente</div><div class="placeholder__p">Los casos de uso se mostrar√°n aqu√≠.</div></div></div></div>
  <div class="view" id="v-champions"><div class="sec"><div class="hero-banner"><div class="hero-banner__sub">Programa interno</div><div class="hero-banner__h">Champions</div><div class="hero-banner__p">Lidera la adopci√≥n de IA en tu equipo. Comparte workflows e impulsa la innovaci√≥n.</div></div></div><div class="sec"><div class="placeholder"><div class="placeholder__ico">‚òÖ</div><div class="placeholder__h">Pr√≥ximamente</div><div class="placeholder__p">El programa de Champions est√° en desarrollo.</div></div></div></div>
  <div class="view" id="v-education"><div class="sec"><div class="hero-banner"><div class="hero-banner__sub">Aprende</div><div class="hero-banner__h">Education</div><div class="hero-banner__p">Recursos, gu√≠as y cursos para dominar la IA en tu trabajo diario.</div></div></div><div class="sec"><div class="placeholder"><div class="placeholder__ico">‚ñ≤</div><div class="placeholder__h">Pr√≥ximamente</div><div class="placeholder__p">Contenido educativo se publicar√° aqu√≠.</div></div></div></div>
  <div class="view" id="v-help"><div class="sec"><div class="hero-banner"><div class="hero-banner__sub">Soporte</div><div class="hero-banner__h">Help</div><div class="hero-banner__p">¬øNecesitas ayuda con el portal o las herramientas de IA?</div></div></div><div class="sec"><div class="placeholder"><div class="placeholder__ico">?</div><div class="placeholder__h">Pr√≥ximamente</div><div class="placeholder__p">FAQs y soporte aparecer√°n aqu√≠.</div></div></div></div>

  <!-- CIBERSEGURIDAD -->
  <div class="view" id="v-cybersec">
    <div class="hero-banner" style="background:linear-gradient(135deg,#1e1d1b 0%,#2e2d2a 40%,#E8553A 100%)">
      <div class="hero-banner__sub">Seguridad de la informaci√≥n</div>
      <div class="hero-banner__h">Ciberseguridad</div>
      <div class="hero-banner__p">Herramientas aprobadas, gu√≠as de uso seguro y mejores pr√°cticas para proteger la informaci√≥n de Connect al usar IA y tecnolog√≠a.</div>
    </div>
    <div class="tabs" id="csTabs">
      <button class="tab on" data-tab="cs-tools">Portal de herramientas</button>
      <button class="tab" data-tab="cs-bp">Best Practices</button>
    </div>

    <!-- TAB 1: Portal de herramientas -->
    <div class="tab-panel on" id="tp-cs-tools">
      <section class="sec" style="padding-top:0">
        <div class="sec__h">Herramientas aprobadas</div>
        <div class="sec__sub" style="font-size:.8rem;color:var(--ink3);margin-bottom:1.25rem">Herramientas verificadas y autorizadas por el equipo de IT y Ciberseguridad de Connect para uso corporativo.</div>
        <div class="tool-grid">
          <div class="tool">
            <div class="tool__ico tool__ico--blue">üõ°</div>
            <div class="tool__body">
              <div class="tool__h">Google Workspace</div>
              <div class="tool__p">Suite completa: Gmail, Drive, Docs, Sheets, Meet. Cifrado en tr√°nsito y en reposo. SSO habilitado.</div>
              <div class="bp__tag" style="margin-top:.375rem">Aprobado</div>
            </div>
          </div>
          <div class="tool">
            <div class="tool__ico tool__ico--green">‚ú¶</div>
            <div class="tool__body">
              <div class="tool__h">Google Gemini (Corporativo)</div>
              <div class="tool__p">IA generativa aprobada para uso interno. No usar datos PII de clientes sin anonimizar. Los prompts no se usan para entrenar modelos.</div>
              <div class="bp__tag" style="margin-top:.375rem">Aprobado con condiciones</div>
            </div>
          </div>
          <div class="tool">
            <div class="tool__ico tool__ico--green">‚ö°</div>
            <div class="tool__body">
              <div class="tool__h">Slack</div>
              <div class="tool__p">Comunicaci√≥n interna. No compartir contrase√±as, tokens o datos sensibles por mensajes directos ni canales.</div>
              <div class="bp__tag" style="margin-top:.375rem">Aprobado</div>
            </div>
          </div>
          <div class="tool">
            <div class="tool__ico tool__ico--purple">‚òÅ</div>
            <div class="tool__body">
              <div class="tool__h">VPN Corporativa</div>
              <div class="tool__p">Conexi√≥n segura obligatoria para acceso remoto a sistemas internos. Siempre activa fuera de la oficina.</div>
              <div class="bp__tag" style="margin-top:.375rem">Obligatorio remoto</div>
            </div>
          </div>
          <div class="tool">
            <div class="tool__ico tool__ico--amber">üîê</div>
            <div class="tool__body">
              <div class="tool__h">Autenticaci√≥n MFA</div>
              <div class="tool__p">Doble factor de autenticaci√≥n activo en todas las cuentas corporativas. Usa la app de autenticaci√≥n, no SMS.</div>
              <div class="bp__tag" style="margin-top:.375rem">Obligatorio</div>
            </div>
          </div>
          <div class="tool">
            <div class="tool__ico tool__ico--red">‚äò</div>
            <div class="tool__body">
              <div class="tool__h">Antivirus / EDR</div>
              <div class="tool__p">Soluci√≥n endpoint instalada en todos los equipos corporativos. No desactivar ni excluir carpetas sin autorizaci√≥n de IT.</div>
              <div class="bp__tag" style="margin-top:.375rem">Obligatorio</div>
            </div>
          </div>
        </div>

        <div class="sec__h" style="margin-top:2rem">Herramientas restringidas</div>
        <div class="sec__sub" style="font-size:.8rem;color:var(--ink3);margin-bottom:1.25rem">Herramientas de IA y software que no est√°n autorizadas para uso con datos corporativos de Connect.</div>
        <div class="tool-grid">
          <div class="tool" style="border-color:#DC262630">
            <div class="tool__ico tool__ico--red">‚úï</div>
            <div class="tool__body">
              <div class="tool__h">ChatGPT (cuenta personal)</div>
              <div class="tool__p">No autorizado para datos corporativos. Los datos ingresados pueden usarse para entrenar modelos. Usar Gemini corporativo en su lugar.</div>
              <div class="bp__tag" style="margin-top:.375rem;color:#DC2626;background:#DC262610">No autorizado</div>
            </div>
          </div>
          <div class="tool" style="border-color:#DC262630">
            <div class="tool__ico tool__ico--red">‚úï</div>
            <div class="tool__body">
              <div class="tool__h">IA gratuitas sin acuerdo</div>
              <div class="tool__p">Herramientas como Copilot personal, Claude free, Perplexity sin licencia corporativa. No ingresar datos de clientes ni informaci√≥n interna.</div>
              <div class="bp__tag" style="margin-top:.375rem;color:#DC2626;background:#DC262610">No autorizado</div>
            </div>
          </div>
          <div class="tool" style="border-color:#D9770630">
            <div class="tool__ico tool__ico--amber">‚ö†</div>
            <div class="tool__body">
              <div class="tool__h">USB / almacenamiento externo</div>
              <div class="tool__p">Dispositivos de almacenamiento externo requieren autorizaci√≥n previa de IT. Riesgo de malware y fuga de datos.</div>
              <div class="bp__tag" style="margin-top:.375rem;color:#D97706;background:#D9770610">Requiere aprobaci√≥n</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- TAB 2: Best Practices -->
    <div class="tab-panel" id="tp-cs-bp">
      <section class="sec" style="padding-top:0">
        <div class="sec__h">Best Practices de seguridad</div>
        <div class="sec__sub" style="font-size:.8rem;color:var(--ink3);margin-bottom:1.25rem">Gu√≠as esenciales para proteger la informaci√≥n de Connect y nuestros clientes en el uso diario de tecnolog√≠a e IA.</div>

        <div class="bp-grid">
          <div class="bp">
            <div class="bp__h"><span class="bp__num">1</span> Uso seguro de IA generativa</div>
            <div class="bp__p">Al usar Gemini u otras herramientas de IA aprobadas, nunca incluyas datos personales identificables (PII) de clientes sin anonimizar. Nombres, c√©dulas, tel√©fonos y direcciones deben ser reemplazados por placeholders.</div>
            <div class="bp__do">Anonimiza: "El cliente [NOMBRE] report√≥ desde [CIUDAD]"</div>
            <div class="bp__dont">Nunca: "Juan P√©rez, c√©dula 1-1234-5678, llam√≥ desde Escaz√∫"</div>
            <div class="bp__tag">IA ¬∑ Datos</div>
          </div>
          <div class="bp">
            <div class="bp__h"><span class="bp__num">2</span> Contrase√±as y accesos</div>
            <div class="bp__p">Usa contrase√±as √∫nicas de m√≠nimo 12 caracteres para cada sistema. Activa MFA en todas las cuentas. Nunca compartas credenciales por Slack, email o chat.</div>
            <div class="bp__do">Usa un gestor de contrase√±as aprobado por IT</div>
            <div class="bp__dont">Nunca guardes contrase√±as en archivos de texto o notas</div>
            <div class="bp__tag">Accesos</div>
          </div>
          <div class="bp">
            <div class="bp__h"><span class="bp__num">3</span> Phishing y ingenier√≠a social</div>
            <div class="bp__p">Verifica el remitente antes de hacer click en enlaces o descargar adjuntos. Los ataques de phishing pueden imitar correos internos. Ante la duda, reporta a IT.</div>
            <div class="bp__do">Verifica la direcci√≥n del remitente, no solo el nombre</div>
            <div class="bp__dont">Nunca ingreses credenciales desde un enlace de email sospechoso</div>
            <div class="bp__tag">Email ¬∑ Social</div>
          </div>
          <div class="bp">
            <div class="bp__h"><span class="bp__num">4</span> Clasificaci√≥n de informaci√≥n</div>
            <div class="bp__p">Toda informaci√≥n de Connect tiene un nivel de sensibilidad. Datos de clientes, contratos y financieros son confidenciales. No compartir en herramientas no autorizadas.</div>
            <div class="bp__do">Usa Drive corporativo para documentos sensibles</div>
            <div class="bp__dont">Nunca subas datos de clientes a servicios gratuitos o personales</div>
            <div class="bp__tag">Datos ¬∑ Clasificaci√≥n</div>
          </div>
          <div class="bp">
            <div class="bp__h"><span class="bp__num">5</span> Trabajo remoto seguro</div>
            <div class="bp__p">Activa siempre la VPN al trabajar fuera de la oficina. No uses redes WiFi p√∫blicas sin VPN. Bloquea tu equipo al alejarte, incluso en casa.</div>
            <div class="bp__do">VPN + pantalla bloqueada + red confiable</div>
            <div class="bp__dont">Nunca trabajes desde WiFi p√∫blico sin protecci√≥n</div>
            <div class="bp__tag">Remoto ¬∑ VPN</div>
          </div>
          <div class="bp">
            <div class="bp__h"><span class="bp__num">6</span> Reporte de incidentes</div>
            <div class="bp__p">Si sospechas de un incidente de seguridad (acceso no autorizado, malware, fuga de datos), reporta inmediatamente al equipo de IT. No intentes resolverlo solo.</div>
            <div class="bp__do">Reporta al canal de IT o a tu supervisor inmediato</div>
            <div class="bp__dont">Nunca ignores un comportamiento sospechoso en tu equipo</div>
            <div class="bp__tag">Incidentes</div>
          </div>
          <div class="bp">
            <div class="bp__h"><span class="bp__num">7</span> Actualizaciones y parches</div>
            <div class="bp__p">Mant√©n tu equipo actualizado. Las actualizaciones de sistema operativo y software corrigen vulnerabilidades cr√≠ticas. No pospongas reinicios por m√°s de 24h.</div>
            <div class="bp__do">Acepta las actualizaciones autom√°ticas de IT</div>
            <div class="bp__dont">Nunca desactives las actualizaciones autom√°ticas</div>
            <div class="bp__tag">Equipos</div>
          </div>
          <div class="bp">
            <div class="bp__h"><span class="bp__num">8</span> Prompts y datos en IA</div>
            <div class="bp__p">Al usar la Prompt Library, los prompts est√°n dise√±ados para no requerir datos confidenciales directos. Si un caso lo requiere, anonimiza antes de pegar en la herramienta de IA.</div>
            <div class="bp__do">Usa los campos de variables con datos gen√©ricos o anonimizados</div>
            <div class="bp__dont">Nunca pegues bases de datos completas con PII en una IA</div>
            <div class="bp__tag">IA ¬∑ Prompts</div>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê MODAL ‚Äî NEW UX ‚ïê‚ïê‚ïê -->
<div class="mbg" id="mbg">
  <div class="mdl" id="mdl">
    <div class="mdl__top">
      <div class="mdl__top-l">
        <div class="mdl__cat" id="mCat">‚Äî</div>
        <div class="mdl__title" id="mTitle">‚Äî</div>
      </div>
      <button class="mdl__x" id="mX" type="button">‚úï</button>
    </div>
    <div class="mdl__body">
      <!-- What does it do -->
      <div class="wb">
        <div class="wb__k" id="mWbK">¬øQu√© hace este prompt?</div>
        <div class="wb__v" id="mDesc">‚Äî</div>
      </div>
      <!-- Variable fields -->
      <div id="mVarsSection"></div>
      <!-- Preview -->
      <div>
        <div class="pv-h" id="mPvH"><span class="step" style="background:var(--ink3)">2</span> <span>Vista previa</span></div>
        <div class="pv-tog">
          <button class="pv-tog__b on" id="togFmt" type="button">Formateado</button>
          <button class="pv-tog__b" id="togRaw" type="button">Raw</button>
        </div>
        <div class="pv-box" id="pvFmt"></div>
        <div class="pv-box pv-raw" id="pvRaw" style="display:none"></div>
      </div>
      <!-- Actions -->
      <div class="acts">
        <button class="btn btn--gem" id="btnGem" type="button"><span><svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" stroke="#fff" stroke-width="1.5"/><path d="M12 2v20M2 12h20M4.93 4.93l14.14 14.14M19.07 4.93L4.93 19.07" stroke="#fff" stroke-width=".8" opacity=".4"/></svg> Usar en Gemini</span></button>
        <span class="or-d">o</span>
        <button class="btn btn--copy" id="btnCpy" type="button">Copiar prompt</button>
        <button class="btn btn--ghost" id="btnClr" type="button">Limpiar</button>
      </div>
      <!-- Info strip -->
      <div class="istrip" id="mStrip"></div>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
(function(){
'use strict';
const CX={1:'B√°sico',2:'Est√°ndar',3:'Intermedio',4:'Avanzado'};
const VHINTS={
  notas:{es:'Pega tus notas tal cual las tengas',en:'Paste your notes as-is'},
  documento:{es:'Pega o describe el documento',en:'Paste or describe the document'},
  texto:{es:'Pega el texto a procesar',en:'Paste the text to process'},
  proceso:{es:'Describe el proceso paso a paso',en:'Describe the process step by step'},
  tema:{es:'Describe el tema o situaci√≥n',en:'Describe the topic or situation'},
  correo:{es:'Pega el correo o describe la situaci√≥n',en:'Paste the email or describe the situation'},
  datos:{es:'Pega los datos a analizar',en:'Paste the data to analyze'},
  incidente:{es:'Describe el incidente',en:'Describe the incident'},
  script:{es:'Describe qu√© quieres automatizar',en:'Describe what you want to automate'},
  requerimiento:{es:'Describe el requerimiento',en:'Describe the requirement'},
  audiencia:{es:'Describe la audiencia objetivo',en:'Describe the target audience'},
  producto:{es:'Describe el producto o servicio',en:'Describe the product or service'},
  campana:{es:'Describe la campa√±a',en:'Describe the campaign'},
  objetivos:{es:'Lista los objetivos principales',en:'List the main objectives'},
  competidores:{es:'Lista los competidores a analizar',en:'List competitors to analyze'},
  objeciones:{es:'Lista las objeciones comunes',en:'List common objections'},
  consulta:{es:'Escribe la consulta',en:'Write the query'},
  puesto:{es:'Describe el puesto',en:'Describe the position'},
  evaluacion:{es:'Describe lo que quieres evaluar',en:'Describe what to evaluate'},
  proveedor:{es:'Describe el proveedor o servicio',en:'Describe the vendor or service'},
  riesgo:{es:'Describe el riesgo identificado',en:'Describe the identified risk'},
  politica:{es:'Describe la pol√≠tica a revisar',en:'Describe the policy to review'},
  proyecto:{es:'Describe el proyecto',en:'Describe the project'},
  contexto:{es:'Provee el contexto necesario',en:'Provide the necessary context'},
  caso:{es:'Describe el caso',en:'Describe the case'},
  situacion:{es:'Describe la situaci√≥n',en:'Describe the situation'},
  feedback:{es:'Pega el feedback recibido',en:'Paste the feedback received'},
  reunion:{es:'Describe la reuni√≥n o pega las notas',en:'Describe the meeting or paste notes'},
  agenda:{es:'Lista los temas de la agenda',en:'List agenda topics'},
  minuta:{es:'Pega la minuta o notas de la reuni√≥n',en:'Paste meeting minutes or notes'},
};
let DATA=[],LANG=localStorage.getItem('cp_l')||'es',FAVS=JSON.parse(localStorage.getItem('cp_f')||'[]'),cur=null;
const $=s=>document.querySelector(s),$$=s=>document.querySelectorAll(s);
function t(o){if(!o)return'';if(typeof o==='string')return o;return o[LANG]||o.es||o.en||'';}
function ck(p){return p.category?.key||'';}
function cl(p){return t(p.category);}
function norm(s){return(s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,'').toLowerCase();}

// Extract Tarea from TCREI prompt as human description
function extractDesc(p){
  const txt=t(p.prompt)||'';
  const m=txt.match(/\*\*T\s*\(Tare?a\):\*\*\s*(.+)/i)||txt.match(/\*\*T\s*\(Task\):\*\*\s*(.+)/i);
  return m?m[1].trim().replace(/\.$/,''):'';
}

// Build full prompt with variable values filled
function buildPrompt(p,vals){
  let txt=t(p.prompt)||'';
  (p.variables||[]).forEach(v=>{
    const val=vals[v]||`{{${v}}}`;
    txt=txt.replace(new RegExp('\\{\\{'+v+'\\}\\}','g'),val);
  });
  return txt;
}

// Build formatted preview HTML
function buildFmtPreview(p,vals){
  let txt=t(p.prompt)||'';
  // Strip the first TCREI intro line
  txt=txt.replace(/^Usa?\s+el\s+marco\s+\*\*T-C-R-E-I\*\*.+\n*/i,'');
  txt=txt.replace(/^Use\s+the\s+\*\*T-C-R-E-I\*\*.+\n*/i,'');
  // Convert sections
  const sections=[
    {re:/\*\*T\s*\(Tare?a?\):\*\*\s*/i,label:LANG==='es'?'Tarea':'Task'},
    {re:/\*\*T\s*\(Task\):\*\*\s*/i,label:'Task'},
    {re:/\*\*C\s*\(Contexto?\):\*\*\s*/i,label:LANG==='es'?'Contexto':'Context'},
    {re:/\*\*C\s*\(Context\):\*\*\s*/i,label:'Context'},
    {re:/\*\*R\s*\(Reglas?\):\*\*\s*/i,label:LANG==='es'?'Reglas':'Rules'},
    {re:/\*\*R\s*\(Rules\):\*\*\s*/i,label:'Rules'},
    {re:/\*\*E\s*\(Ejemplo?\):\*\*\s*/i,label:LANG==='es'?'Ejemplo':'Example'},
    {re:/\*\*E\s*\(Example\):\*\*\s*/i,label:'Example'},
    {re:/\*\*I\s*\(Inputs?\):\*\*\s*/i,label:'Inputs'},
  ];
  sections.forEach(s=>{txt=txt.replace(s.re,`\n<b>${s.label}:</b> `);});
  txt=txt.replace(/\*\*/g,'');
  // Fill variables with highlight
  (p.variables||[]).forEach(v=>{
    const val=vals[v];
    if(val){
      txt=txt.replace(new RegExp('\\{\\{'+v+'\\}\\}','g'),`<span class="hl">${val}</span>`);
      txt=txt.replace(new RegExp('-\\s*'+val.substring(0,20),'g'),`- <span class="hl">${val}</span>`);
    }else{
      txt=txt.replace(new RegExp('\\{\\{'+v+'\\}\\}','g'),`<span class="hl" style="opacity:.5">‚¨ú ${v}</span>`);
    }
  });
  txt=txt.replace(/\n/g,'<br/>');
  return txt;
}

// Theme
let theme=localStorage.getItem('cp_t')||'light';
document.documentElement.setAttribute('data-t',theme);updTh();
$('#btnTheme').onclick=()=>{theme=theme==='dark'?'light':'dark';document.documentElement.setAttribute('data-t',theme);localStorage.setItem('cp_t',theme);updTh();};
function updTh(){const d=theme==='dark';$('#tIco').innerHTML=d?'<circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>':'<path d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z"/>';$('#tLbl').textContent=d?'Light':'Dark';}

// Lang
$$('.lpill__b').forEach(b=>b.onclick=()=>{LANG=b.dataset.lang;localStorage.setItem('cp_l',LANG);$$('.lpill__b').forEach(x=>x.classList.toggle('on',x.dataset.lang===LANG));buildPL();});
$$('.lpill__b').forEach(b=>b.classList.toggle('on',b.dataset.lang===LANG));

// Nav
window.nav=function(v){
  $$('.view').forEach(x=>x.classList.remove('on'));
  const el=$('#v-'+v);if(el)el.classList.add('on');
  $$('.nav-item').forEach(n=>{n.classList.toggle('on',n.dataset.v===v);});
  window.scrollTo(0,0);if(v==='prompts'&&DATA.length)renderPL();
  $('#side').classList.remove('open');
  history.replaceState(null,'','#'+v);
};
$$('.nav-item').forEach(n=>n.onclick=()=>nav(n.dataset.v));
$('#burger').onclick=()=>$('#side').classList.toggle('open');
// Hash routing
window.addEventListener('hashchange',()=>{const h=location.hash.slice(1);if(h)nav(h);});
if(location.hash.length>1)setTimeout(()=>nav(location.hash.slice(1)),50);

$('#globalQ').onkeydown=e=>{if(e.key==='Enter'&&$('#globalQ').value.trim()){nav('prompts');$('#plQ').value=$('#globalQ').value;$('#globalQ').value='';renderPL();}};

// Internal tabs (cybersec)
document.addEventListener('click',e=>{
  const tab=e.target.closest('.tab');if(!tab)return;
  const container=tab.closest('.view');if(!container)return;
  container.querySelectorAll('.tab').forEach(t=>t.classList.toggle('on',t===tab));
  container.querySelectorAll('.tab-panel').forEach(p=>p.classList.toggle('on',p.id==='tp-'+tab.dataset.tab));
});

// Load
async function load(){
  try{const r=await fetch('./prompts.json');if(!r.ok)throw new Error(r.status);const d=await r.json();DATA=Array.isArray(d)?d:(d.prompts||[]);buildPL();}
  catch(e){$('#plGrid').innerHTML='<div class="empty"><div class="empty__h">prompts.json not found</div></div>';}
}
function buildPL(){
  const cats=[];const seen=new Set();
  DATA.forEach(p=>{const k=ck(p);if(!seen.has(k)){seen.add(k);cats.push({k,l:cl(p)});}});
  const allW=LANG==='es'?'Todas las categor√≠as':'All categories';
  $('#plCat').innerHTML=`<option value="">${allW}</option>`+cats.map(c=>`<option value="${c.k}">${c.l}</option>`).join('');
  $('#plSub').textContent=LANG==='es'?'Explora prompts optimizados para las tareas diarias de Connect.':'Explore optimized prompts for Connect daily tasks.';
  renderPL();
}
function score(p,raw){
  if(!raw)return 1;const qn=norm(raw),ws=qn.split(/\s+/).filter(Boolean);let s=0;
  const ti=norm(t(p.title)),ca=norm(cl(p)),cak=norm(ck(p)),tgs=(p.tags||[]).map(norm),tx=norm(t(p.prompt)),vs=(p.variables||[]).map(norm),pid=norm(p.id||'');
  ws.forEach(w=>{if(pid.includes(w))s+=14;if(ti.includes(w))s+=10;if(ti.startsWith(w))s+=5;if(cak.includes(w)||ca.includes(w))s+=6;if(tgs.some(x=>x.includes(w)))s+=8;if(vs.some(x=>x.includes(w)))s+=4;if(tx.includes(w))s+=2;});
  if(ti.includes(qn))s+=15;return s;
}
function renderPL(){
  const raw=$('#plQ').value.trim(),catF=$('#plCat').value;
  let res=DATA.map(p=>({...p,_s:score(p,raw)}));
  if(raw)res=res.filter(p=>p._s>0);
  if(catF)res=res.filter(p=>ck(p)===catF);
  const sv=$('#plSort').value;
  if(sv==='rel'&&raw)res.sort((a,b)=>b._s-a._s);
  else if(sv==='az')res.sort((a,b)=>t(a.title).localeCompare(t(b.title),LANG));
  else if(sv==='za')res.sort((a,b)=>t(b.title).localeCompare(t(a.title),LANG));
  else if(sv==='id')res.sort((a,b)=>(a.id||'').localeCompare(b.id||''));
  $('#plCount').textContent=`${res.length} / ${DATA.length}`;
  if(!res.length){$('#plGrid').innerHTML='<div class="empty"><div class="empty__h">'+(LANG==='es'?'Sin resultados':'No results')+'</div></div>';return;}
  $('#plGrid').innerHTML=res.map(p=>{
    const dTags=(p.tags||[]).filter(x=>x!=='tcrei').slice(0,3),
          desc=extractDesc(p)||t(p.title),
          isFav=FAVS.includes(p.id);
    return `<article class="pc" data-id="${p.id}" tabindex="0">
      <button class="pc__star ${isFav?'on':''}" data-fav="${p.id}" onclick="event.stopPropagation()">${isFav?'‚òÖ':'‚òÜ'}</button>
      <div class="pc__cat">${cl(p)}</div>
      <div class="pc__h">${hl(t(p.title),raw)}</div>
      <div class="pc__desc">${desc}</div>
      <div class="pc__foot"><div class="pc__tags">${dTags.map(x=>`<span class="pc__tag">${x}</span>`).join('')}</div><span class="pc__id">${p.id}</span></div>
    </article>`;
  }).join('');
  $('#plGrid').querySelectorAll('.pc').forEach(c=>{c.onclick=()=>openM(c.dataset.id);c.onkeydown=e=>{if(e.key==='Enter')openM(c.dataset.id);};});
  $('#plGrid').querySelectorAll('[data-fav]').forEach(b=>b.onclick=()=>togFav(b.dataset.fav));
}
function hl(text,raw){if(!raw)return text;const qn=norm(raw),i=norm(text).indexOf(qn);if(i===-1)return text;return text.substring(0,i)+'<mark>'+text.substring(i,i+raw.length)+'</mark>'+text.substring(i+raw.length);}
$('#plQ').oninput=renderPL;$('#plCat').onchange=renderPL;$('#plSort').onchange=renderPL;

// ‚ïê‚ïê‚ïê MODAL ‚ïê‚ïê‚ïê
function openM(id){
  const p=DATA.find(x=>x.id===id);if(!p)return;cur=p;
  $('#mCat').textContent=cl(p);
  $('#mTitle').textContent=t(p.title);
  // Description
  const desc=p.description?t(p.description):extractDesc(p);
  $('#mDesc').textContent=desc||t(p.title);
  $('#mWbK').textContent=LANG==='es'?'¬øQu√© hace este prompt?':'What does this prompt do?';
  // Variable fields
  const vars=p.variables||[];
  const stepLabel=LANG==='es'?'Completa tus datos':'Fill in your data';
  const pvLabel=LANG==='es'?'Vista previa':'Preview';
  if(vars.length){
    $('#mVarsSection').innerHTML=`<div class="vf-h"><span class="step">1</span> ${stepLabel}</div>`+
      vars.map(v=>{
        const hint=VHINTS[v]?t(VHINTS[v]):'';
        const placeholder=hint||((LANG==='es'?'Escribe o pega aqu√≠‚Ä¶':'Type or paste here‚Ä¶'));
        return `<div class="vf"><div class="vf__label"><code>${v}</code> ${hint}</div><textarea class="vf__ta" data-var="${v}" placeholder="${placeholder}" oninput="window._updPv()"></textarea></div>`;
      }).join('');
    $('#mPvH').innerHTML=`<span class="step" style="background:var(--ink3)">2</span> ${pvLabel}`;
  }else{
    $('#mVarsSection').innerHTML='';
    $('#mPvH').innerHTML=`<span class="step" style="background:var(--ink3)">1</span> ${pvLabel}`;
  }
  updPv();
  // Info strip
  const cx=p.complexity||2;
  const dTags=(p.tags||[]).filter(x=>x!=='tcrei');
  $('#mStrip').innerHTML=`
    <div class="istrip__i"><div class="istrip__k">ID</div><div class="istrip__v"><code>${p.id}</code></div></div>
    <div class="istrip__i"><div class="istrip__k">${LANG==='es'?'Complejidad':'Complexity'}</div><div class="istrip__v"><span class="cx-badge cx--${cx}">${CX[cx]||'Est√°ndar'}</span></div></div>
    <div class="istrip__i"><div class="istrip__k">Tags</div><div class="istrip__v">${dTags.join(', ')||'‚Äî'}</div></div>
    <div class="istrip__i"><div class="istrip__k">Framework</div><div class="istrip__v">T-C-R-E-I</div></div>
  `;
  // Show
  $('#mbg').classList.add('on');document.body.style.overflow='hidden';
  // Toggle state
  $('#togFmt').classList.add('on');$('#togRaw').classList.remove('on');
  $('#pvFmt').style.display='';$('#pvRaw').style.display='none';
}

window._updPv=function(){updPv();};
function getVarVals(){
  const vals={};$$('.vf__ta[data-var]').forEach(ta=>{vals[ta.dataset.var]=ta.value.trim();});return vals;
}
function updPv(){
  if(!cur)return;const vals=getVarVals();
  $('#pvFmt').innerHTML=buildFmtPreview(cur,vals);
  const rawTxt=buildPrompt(cur,vals);
  $('#pvRaw').textContent=rawTxt;
}
$('#togFmt').onclick=()=>{$('#togFmt').classList.add('on');$('#togRaw').classList.remove('on');$('#pvFmt').style.display='';$('#pvRaw').style.display='none';};
$('#togRaw').onclick=()=>{$('#togRaw').classList.add('on');$('#togFmt').classList.remove('on');$('#pvRaw').style.display='';$('#pvFmt').style.display='none';};

function getFullPrompt(){return buildPrompt(cur,getVarVals());}

function closeM(){$('#mbg').classList.remove('on');document.body.style.overflow='';cur=null;}
$('#mX').onclick=closeM;
$('#mbg').onclick=e=>{if(e.target===$('#mbg'))closeM();};
document.addEventListener('keydown',e=>{if(e.key==='Escape'&&$('#mbg').classList.contains('on'))closeM();});

$('#btnCpy').onclick=async()=>{try{await navigator.clipboard.writeText(getFullPrompt());toast(LANG==='es'?'Prompt copiado ‚úì':'Prompt copied ‚úì');}catch{fallbackCopy(getFullPrompt());}};
$('#btnGem').onclick=async()=>{
  try{await navigator.clipboard.writeText(getFullPrompt());}catch{fallbackCopy(getFullPrompt());}
  toast(LANG==='es'?'Prompt copiado ‚úì ‚Äî P√©galo en Gemini con Ctrl+V':'Prompt copied ‚úì ‚Äî Paste in Gemini with Ctrl+V');
  setTimeout(()=>window.open('https://gemini.google.com/app','_blank'),350);
};
$('#btnClr').onclick=()=>{$$('.vf__ta[data-var]').forEach(ta=>{ta.value='';});updPv();toast(LANG==='es'?'Campos limpiados':'Fields cleared');};

function fallbackCopy(txt){const ta=document.createElement('textarea');ta.value=txt;ta.style.cssText='position:fixed;opacity:0';document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);}

// Favs
function togFav(id){const i=FAVS.indexOf(id);if(i>-1)FAVS.splice(i,1);else FAVS.push(id);localStorage.setItem('cp_f',JSON.stringify(FAVS));renderPL();}

// Toast
function toast(m){const el=$('#toast');el.textContent=m;el.classList.add('show');clearTimeout(el._t);el._t=setTimeout(()=>el.classList.remove('show'),2500);}

load();
})();
</script>
</body>
</html>
